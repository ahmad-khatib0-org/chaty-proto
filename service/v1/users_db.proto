syntax = "proto3";

package service.v1;

import "service/v1/bots_db.proto";
import "shared/v1/files.proto";

message User {
  string id = 1; // ulid
  string username = 2; // 64 char
  string email = 3; // 255 char
  string password = 4;
  optional string display_name = 5; // 64 char
  optional int32 badges = 6;
  optional string status_text = 7; // 510 char
  optional UserStatus status_presence = 8; // 32 char
  optional string profile_content = 9; // text
  // ulid (26 chars) Reference to files collection
  optional string profile_background_id = 10;
  bool privileged = 11;
  optional int64 suspended_until = 12;
  int64 created_at = 13; // unix timestamp miliseconds
  int64 updated_at = 14; // unix timestamp miliseconds
  bool verified = 15;
  optional shared.v1.File avatar = 16;
  repeated UserRelationship relations = 17;
  optional service.v1.Bot bot = 18;
}

enum UserStatus {
  USER_STATUS_ONLINE = 0;
  USER_STATUS_IDLE = 1;
  USER_STATUS_FOCUS = 2;
  USER_STATUS_BUSY = 3;
  USER_STATUS_INVISIBLE = 4;
}

message UserRelationship {
  string id = 1;
  UserRelationshipStatus status = 2;
}

enum UserRelationshipStatus {
  USER_RELATIONSHIP_STATUS_NONE = 0;
  USER_RELATIONSHIP_STATUS_USER = 1; // Self
  USER_RELATIONSHIP_STATUS_FRIEND = 2;
  USER_RELATIONSHIP_STATUS_OUTGOING = 3; // Friend request sent
  USER_RELATIONSHIP_STATUS_INCOMING = 4; // Friend request received
  USER_RELATIONSHIP_STATUS_BLOCKED = 5; // You blocked them
  USER_RELATIONSHIP_STATUS_BLOCKED_OTHER = 6; // They blocked you
}
